<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>designed profile</title>
  <link rel="stylesheet" href="/ex/css/profile2.css">
</head>

<body>
  <main>
    <h1>Profile</h1>
    <div>
      <section>
        <img src="/ex/images/profile/profilePhoto.png" alt="Profile Image" class="profileImg">
        <h2>Runa🦊</h2>
        <p>Hello! I'm teaching three areas: planning, design, and coding. In my 15th year in the field, I'm currently
          training a product designer at [goorm].</p>
        <p>Contact me at:</p>
        <div class="contact">
          <a href="mailto:runa.uxlabs@gmail.com">runa.uxlabs@gmail.com</a>
          <a href="tel:+821012345678">+821012345678</a>
        </div>
      </section>
      <form action="/" method="POST">
        <span>
          <label for="name">what your name?</label>
          <input type="text" id="name" name="from_name" placeholder="name" required>
        </span>
        <span>
          <label for="email">what your email?</label>
          <input type="email" id="email" name="from_email" placeholder="email address" required>
        </span>
        <span>
          <label for="message">Message</label>
          <textarea id="message" name="message" placeholder="Please write what you want to say to me"
            required></textarea>
        </span>
        <button type="button" id="sendEmail">Submit</button>
      </form>
    </div>
  </main>
  <div id="dimOverlay">
    <div class="spinner"></div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <script>
    const form = document.querySelector('form');
    const submitButton = document.querySelector('#sendEmail');
    const dimOverlay = document.querySelector('#dimOverlay');

    const sendEmail = (e) => {
      e.preventDefault(); // 폼 제출 방지

      // 스피너와 dim 화면 표시
      dimOverlay.classList.add('on');

      emailjs
        .sendForm('service_5cs4jon', 'runauxlabsTemplate', form, {
          publicKey: 'user_stJBqz5kKC5LyQt7X5M88',
        })
        .then(
          () => {
            // 스피너와 dim 화면 숨기기
            dimOverlay.classList.remove('on');
            alert(`${form.from_name.value}님, 메일 전송에 성공했습니다 :)`);
          },
          (error) => {
            // 스피너와 dim 화면 숨기기
            dimOverlay.classList.remove('on');
            alert(`${form.from_name.value}님, 메일 전송에 실패했습니다 :(`);
          },
        );
    };

    // 버튼 클릭 시 sendEmail 함수 호출
    submitButton.addEventListener('click', sendEmail);
  </script>
</body>

</html>